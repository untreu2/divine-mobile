{
  "embedding": [
    -0.029664479196071625,
    -0.006980233360081911,
    -0.03416696563363075,
    -0.10709290206432343,
    0.05241109058260918,
    0.0069571672938764095,
    0.0553186759352684,
    -0.046472568064928055,
    0.019016439095139503,
    0.03008841536939144,
    -0.01784646138548851,
    0.004200287628918886,
    -0.015287130139768124,
    0.0678987130522728,
    0.0029483300168067217,
    0.033574074506759644,
    0.07540351152420044,
    0.005907965824007988,
    -0.08515047281980515,
    -0.03842372074723244,
    -0.026656335219740868,
    -0.05533800274133682,
    0.0846400111913681,
    0.04303047060966492,
    -0.03240332007408142,
    -0.030725717544555664,
    -0.02812553383409977,
    0.000010324562026653439,
    -0.016322551295161247,
    0.022083215415477753,
    0.08325265347957611,
    -0.015328912995755672,
    -0.044025663286447525,
    -0.014836858958005905,
    -0.05335744842886925,
    -0.049162816256284714,
    -0.04566526040434837,
    -0.04084641858935356,
    -0.10101691633462906,
    -0.05809357762336731,
    0.019204694777727127,
    0.06751155108213425,
    -0.06141406297683716,
    -0.003082847921177745,
    -0.05747204273939133,
    0.007935840636491776,
    0.05847225338220596,
    -0.04737204313278198,
    -0.042380254715681076,
    -0.038267772644758224,
    -0.02228371612727642,
    0.022589372470974922,
    -0.07600051909685135,
    0.01694495789706707,
    -0.019873175770044327,
    0.020629510283470154,
    -0.03677969425916672,
    0.06953497231006622,
    0.009710161946713924,
    0.07425864040851593,
    0.027446741238236427,
    -0.07376816123723984,
    0.01525825634598732,
    -0.03812276944518089,
    0.0055511146783828735,
    -0.031683966517448425,
    0.03756604716181755,
    -0.029457205906510353,
    0.057878077030181885,
    -0.0092622647061944,
    -0.08382345736026764,
    0.04307808727025986,
    -0.0239698588848114,
    0.008401583880186081,
    -0.03406333178281784,
    -0.004320962354540825,
    0.03824659809470177,
    -0.014194975607097149,
    -0.015488848090171814,
    -0.18348968029022217,
    0.02132224477827549,
    -0.03621126338839531,
    0.07690222561359406,
    0.01050542388111353,
    0.09791267663240433,
    -0.0025707907043397427,
    -0.0037099134642630816,
    -0.008616995997726917,
    -0.00047288864152505994,
    0.04274759814143181,
    -0.01646861806511879,
    0.1195010095834732,
    -0.0047182911075651646,
    -0.03630442172288895,
    0.052552077919244766,
    -0.015942523255944252,
    0.0348910391330719,
    -0.0022169409785419703,
    -0.08402324467897415,
    0.032191697508096695,
    -0.03807765617966652,
    0.00697907293215394,
    0.028600595891475677,
    0.023869773373007774,
    0.05277736857533455,
    -0.03018638864159584,
    0.02501666359603405,
    0.07474009692668915,
    -0.017813578248023987,
    0.05682292580604553,
    0.011119595728814602,
    -0.020616374909877777,
    0.00844100397080183,
    -0.06112745404243469,
    -0.017702823504805565,
    0.058743659406900406,
    -0.08828896284103394,
    0.013618665747344494,
    -0.02646736241877079,
    0.040230974555015564,
    0.07847128063440323,
    -0.020081384107470512,
    0.07436171919107437,
    -0.014675604179501534,
    -0.02322879619896412,
    -0.0834861472249031,
    0.04857437685132027,
    6.926584299173005e-33,
    -0.005975837353616953,
    0.026003725826740265,
    -0.051616422832012177,
    0.06400904059410095,
    -0.017355989664793015,
    -0.018269699066877365,
    0.025573665276169777,
    0.02391020581126213,
    -0.025628751143813133,
    -0.04848894849419594,
    0.08110311627388,
    -0.04437926784157753,
    -0.008474967442452908,
    -0.020232567563652992,
    0.03501155599951744,
    0.016329705715179443,
    0.014833483844995499,
    -0.02120065502822399,
    0.08787312358617783,
    0.051570553332567215,
    0.05469723418354988,
    -0.005900264717638493,
    -0.032759226858615875,
    -0.013760488480329514,
    -0.07410638779401779,
    0.009883265942335129,
    0.04416126757860184,
    -0.0019825396593660116,
    -0.01644677296280861,
    0.009106115438044071,
    0.04274008423089981,
    -0.05792621895670891,
    0.05438479781150818,
    -0.01917007751762867,
    0.048980142921209335,
    -0.006767649203538895,
    0.011861140839755535,
    -0.0382799431681633,
    -0.04757551848888397,
    -0.07850630581378937,
    -0.014374357648193836,
    0.007347770966589451,
    -0.07598326355218887,
    0.027409670874476433,
    -0.08768902719020844,
    -0.06847891211509705,
    0.04104340076446533,
    0.036892082542181015,
    0.021621098741889,
    0.10391347855329514,
    -0.03035268932580948,
    0.01152988150715828,
    0.04716739058494568,
    -0.10036059468984604,
    -0.08474138379096985,
    0.03908456116914749,
    0.017255615442991257,
    -0.03403039276599884,
    -0.01981537602841854,
    -0.09059664607048035,
    -0.01805427484214306,
    -0.04001663625240326,
    -0.04984661564230919,
    -0.07714851200580597,
    -0.018746409565210342,
    -0.010827339254319668,
    0.04633267596364021,
    0.0021074311807751656,
    0.0025089248083531857,
    0.040893930941820145,
    -0.046837128698825836,
    0.047353994101285934,
    0.07762791961431503,
    -0.0460788868367672,
    -0.04059657081961632,
    0.012990884482860565,
    0.003533462528139353,
    0.06374439597129822,
    -0.030791696161031723,
    -0.023865122348070145,
    0.023807372897863388,
    -0.014767915941774845,
    -0.006007359828799963,
    0.05583032965660095,
    -0.04978640004992485,
    -0.009693628177046776,
    0.054845232516527176,
    -0.016617853194475174,
    -0.04976418614387512,
    0.0462600514292717,
    0.09536759555339813,
    -0.002567329676821828,
    0.14760227501392365,
    0.01259622536599636,
    -0.04711737856268883,
    -5.530555085850964e-33,
    0.006587569136172533,
    -0.019532931968569756,
    -0.07322236150503159,
    0.013326996937394142,
    0.10412293672561646,
    0.005463974550366402,
    -0.015082004480063915,
    -0.008267336525022984,
    0.031342439353466034,
    -0.14192424714565277,
    -0.02334679663181305,
    -0.004748124163597822,
    -0.08636844903230667,
    -0.005342545919120312,
    -0.060629695653915405,
    -0.009772871620953083,
    -0.01477767713367939,
    -0.07863178849220276,
    -0.029427701607346535,
    -0.03430890664458275,
    -0.04038448631763458,
    0.08219866454601288,
    0.003334891051054001,
    -0.010148300789296627,
    0.011910553090274334,
    0.06203843653202057,
    0.054796312004327774,
    0.03658237308263779,
    0.04039618745446205,
    -0.033401258289813995,
    0.1667928695678711,
    -0.018515579402446747,
    -0.11881407350301743,
    -0.02412906475365162,
    0.020178457722067833,
    -0.06500907987356186,
    0.06379897892475128,
    0.10598640888929367,
    -0.14029142260551453,
    0.08025598526000977,
    0.0908670499920845,
    0.036755163222551346,
    -0.06759307533502579,
    0.006333195138722658,
    0.061859067529439926,
    0.026757800951600075,
    0.002202813047915697,
    0.0426306426525116,
    -0.08368987590074539,
    0.022093575447797775,
    0.08577452600002289,
    -0.05227749049663544,
    0.015379650518298149,
    -0.03722595050930977,
    0.02195936068892479,
    0.04964376240968704,
    0.044716089963912964,
    0.05867607146501541,
    0.06255608797073364,
    -0.04445754736661911,
    0.07665193825960159,
    -0.06401549279689789,
    -0.07085897773504257,
    0.06256236881017685,
    -0.04926169291138649,
    0.01936853863298893,
    -0.02517356537282467,
    0.043785460293293,
    0.0010013605933636427,
    0.032161351293325424,
    0.03307545185089111,
    -0.06922513246536255,
    -0.019048675894737244,
    -0.01667626015841961,
    0.06450983881950378,
    0.010709509253501892,
    0.08475524932146072,
    -0.06566303968429565,
    0.017836371436715126,
    0.0056366827338933945,
    -0.1262904852628708,
    0.005062765907496214,
    -0.0022551272995769978,
    -0.05953510105609894,
    0.04848531633615494,
    -0.04591353237628937,
    -0.04941641911864281,
    0.035640742629766464,
    -0.010815014131367207,
    -0.03262599557638168,
    0.015561824664473534,
    0.02230476588010788,
    -0.04908781126141548,
    -0.023639922961592674,
    0.015785546973347664,
    -4.8750184333812285e-8,
    -0.037283848971128464,
    -0.01644381508231163,
    -0.08305820822715759,
    0.07290419936180115,
    -0.0007312874658964574,
    0.02636064402759075,
    0.032708991318941116,
    -0.015524104237556458,
    0.09826423972845078,
    -0.042535312473773956,
    0.0685424730181694,
    -0.03365851566195488,
    -0.024822039529681206,
    -0.06776285916566849,
    -0.0002275259466841817,
    -0.014870001003146172,
    0.03808794170618057,
    0.003968123346567154,
    -0.08343758434057236,
    -0.03965083882212639,
    -0.12278728932142258,
    0.024101905524730682,
    -0.025724351406097412,
    -0.07947040349245071,
    -0.09447406977415085,
    0.05398689582943916,
    0.05671431124210358,
    0.01807292550802231,
    -0.0017701342003419995,
    0.011131642386317253,
    0.008407157845795155,
    0.01614850014448166,
    0.06699983775615692,
    -0.1250266283750534,
    0.017363406717777252,
    0.037196312099695206,
    0.01767558977007866,
    -0.0008820148068480194,
    0.0427781343460083,
    0.10317312180995941,
    0.026772048324346542,
    0.021794307976961136,
    0.0793934166431427,
    0.018205877393484116,
    -0.009906943887472153,
    0.05070041865110397,
    0.055240098387002945,
    -0.006856888998299837,
    0.029812844470143318,
    0.029080336913466454,
    -0.017609456554055214,
    -0.0036673054564744234,
    -0.07902348041534424,
    0.05709497258067131,
    -0.06730546802282333,
    -0.02906884253025055,
    0.08603664487600327,
    -0.03863450139760971,
    0.02528136409819126,
    0.0011386380065232515,
    0.13268259167671204,
    -0.05050160735845566,
    0.05703336000442505,
    0.006937907077372074
  ],
  "text": "**NSFW Video Caching 401 Fix - COMPLETED**\n\nSuccessfully fixed the 401 authentication error when caching NSFW videos from Blossom servers.\n\n**Changes Made**:\n\n1. **VideoCacheManager.cacheVideo()** (lib/services/video_cache_manager.dart:51)\n   - Added optional `authHeaders` parameter\n   - Logs when auth headers are present: \"ðŸŽ¬ Caching video ... (with auth)\"\n   - Passes headers to `downloadFile()` call\n\n2. **individual_video_providers.dart** \n   - Created `_cacheVideoWithAuth()` helper function (line 249)\n   - Checks if user has verified adult content via `ageVerificationService.isAdultContentVerified`\n   - If verified AND videoEvent has sha256 hash, creates Blossom auth header\n   - Extracts server URL from video URL for auth context\n   - Passes Authorization header to cacheVideo()\n   - Updated background cache call to use new helper\n\n3. **Added imports**:\n   - `dart:io` for File type\n   - `broken_video_tracker.dart` (show BrokenVideoTracker only)\n\n**How It Works**:\n- When user scrolls past NSFW video, provider creates video controller\n- Background cache request checks if user verified adult content\n- If verified, creates Blossom BUD-01 auth header (kind 24242) with sha256 hash\n- Passes \"Authorization: Nostr <base64-event>\" header to cache download\n- Server accepts authenticated request and returns video\n- Cache succeeds, future views use cached file\n\n**Key Insight**:\nBlossom servers accept auth headers even for non-restricted content, so it's safe to always add them when user has verified. This prevents 401 errors without breaking non-NSFW content.\n\nflutter analyze: âœ… No errors",
  "sections": [
    "Project Notes"
  ],
  "timestamp": 1760663481895,
  "path": "/Users/rabble/code/andotherstuff/openvine/mobile/.private-journal/2025-10-17/14-11-21-895198.md"
}