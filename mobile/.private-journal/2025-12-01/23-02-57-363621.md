---
title: "11:02:57 PM - December 1, 2025"
date: 2025-12-01T10:02:57.363Z
timestamp: 1764583377363
---

## Project Notes

## macOS Camera Duplicate Implementation Fix (2025-12-01)

**Problem**: Two separate AVCaptureSession instances were fighting for camera access:
- `camera_macos` package created one session for visual preview
- `NativeMacOSCamera` Swift plugin created another session for recording
- This caused "Cannot Record" PlatformException errors

**Root Cause**: The MacOSCameraInterface class used a "hybrid approach" that was fundamentally broken - you can't have two AVCaptureSessions running simultaneously for the same camera.

**Solution**: Removed `camera_macos` package from vine_recording_controller.dart and created `_NativeFramePreview` widget that uses `NativeMacOSCamera.frameStream` for preview. Now single AVCaptureSession handles both preview AND recording.

**Files Changed**:
- `lib/services/vine_recording_controller.dart`:
  - Removed `camera_macos` import
  - Updated MacOSCameraInterface class comment
  - Changed preview widget from `camera_macos.CameraMacOSView` to `_NativeFramePreview`
  - Added `_NativeFramePreview` widget class using StreamBuilder with frameStream

**Note**: `camera_service_impl.dart` still imports camera_macos but is dead code (not imported anywhere). Could be cleaned up later.
